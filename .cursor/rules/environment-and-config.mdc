---
description: Environment variables, credentials, and configuration guidance
---

# Environment and Configuration

## Credentials

The SAP AI SDK (`@sap-ai-sdk/orchestration` and `@sap-ai-sdk/foundation-models`)
handles authentication automatically:

1. **On SAP BTP**: Uses service binding from `VCAP_SERVICES`
2. **Locally**: Uses `AICORE_SERVICE_KEY` environment variable containing the
   full JSON service key

## Provider Configuration

Configure the provider using `createSAPAIProvider(options)`. See
[src/sap-ai-provider.ts](mdc:src/sap-ai-provider.ts) for complete type definitions.

### Configuration Options

| Option | Type | Description |
|--------|------|-------------|
| `resourceGroup` | `string` | SAP AI Core resource group (default: `'default'`) |
| `deploymentId` | `string` | Specific deployment ID (auto-resolved if not set) |
| `api` | `'orchestration' \| 'foundation-models'` | Default API type (default: `'orchestration'`) |
| `defaultSettings` | `SAPAISettings` | Default model settings applied to all calls |
| `destination` | `HttpDestinationOrFetchOptions` | Custom destination configuration |
| `logLevel` | `'debug' \| 'info' \| 'warn' \| 'error'` | Logging verbosity for SAP AI SDK |
| `name` | `string` | Provider name used as key in `providerOptions` (default: `'sap-ai'`) |
| `warnOnAmbiguousConfig` | `boolean` | Warn when both deploymentId and resourceGroup are set (default: `true`) |

### Examples

```typescript
import { createSAPAIProvider } from "@jerome-benoit/sap-ai-provider";

// Default configuration (auto-detects authentication)
const provider = createSAPAIProvider();

// With specific resource group
const provider = createSAPAIProvider({
  resourceGroup: "production",
});

// With specific deployment ID
const provider = createSAPAIProvider({
  deploymentId: "d65d81e7c077e583",
});

// With API selection and default settings
const provider = createSAPAIProvider({
  api: "foundation-models",
  defaultSettings: { modelParams: { temperature: 0.7 } },
});

// With custom provider name
const provider = createSAPAIProvider({
  name: "sap-ai-prod",
});
```

## Environment Variables

- `AICORE_SERVICE_KEY` â€” Full JSON string of your SAP AI Core service key (used
  by SAP AI SDK)

Do not commit secrets. Prefer local `.env` and CI secrets. `dotenv` is available
for local development.

## Deployment and Resource Group

- Default `resourceGroup`: `'default'`

Both `resourceGroup` and `deploymentId` can be configured in provider settings.

## SAP BTP (VCAP_SERVICES)

For BTP environments, the SAP AI SDK automatically reads credentials from
`VCAP_SERVICES` when the application is bound to an AI Core service instance.
